import{_ as i,c as a,o as l,ag as e}from"./chunks/framework.DPDPlp3K.js";const F=JSON.parse('{"title":"DKIM 设置指南","description":"","frontmatter":{},"headers":[],"relativePath":"guides/dkim-setup.md","filePath":"guides/dkim-setup.md","lastUpdated":1742625674000}'),n={name:"guides/dkim-setup.md"};function t(h,s,p,k,r,d){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="dkim-设置指南" tabindex="-1">DKIM 设置指南 <a class="header-anchor" href="#dkim-设置指南" aria-label="Permalink to &quot;DKIM 设置指南&quot;">​</a></h1><p>DKIM (DomainKeys Identified Mail) 是一种电子邮件验证技术，可以让接收方验证邮件确实来自您声称的域名，并且在传输过程中没有被篡改。配置 DKIM 可以提高您的邮件送达率，减少被标记为垃圾邮件的几率。</p><h2 id="dkim-工作原理" tabindex="-1">DKIM 工作原理 <a class="header-anchor" href="#dkim-工作原理" aria-label="Permalink to &quot;DKIM 工作原理&quot;">​</a></h2><p>DKIM 使用公钥加密技术：</p><ol><li>发件方服务器使用私钥对邮件的特定部分进行签名</li><li>接收方服务器通过 DNS 查询获取发件方域名的公钥</li><li>接收方使用公钥验证签名的有效性</li><li>如果验证成功，证明邮件确实由该域名发送且未被篡改</li></ol><h2 id="go-mail-server-中的-dkim-配置" tabindex="-1">Go Mail Server 中的 DKIM 配置 <a class="header-anchor" href="#go-mail-server-中的-dkim-配置" aria-label="Permalink to &quot;Go Mail Server 中的 DKIM 配置&quot;">​</a></h2><h3 id="自动配置-推荐" tabindex="-1">自动配置（推荐） <a class="header-anchor" href="#自动配置-推荐" aria-label="Permalink to &quot;自动配置（推荐）&quot;">​</a></h3><p>最简单的方法是使用我们提供的自动配置脚本：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载并运行配置脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setup_tunnel.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./setup_tunnel.sh</span></span></code></pre></div><p>该脚本会：</p><ol><li>生成 DKIM 密钥对（公钥和私钥）</li><li>提供需要添加到 DNS 的 TXT 记录</li><li>更新配置文件以启用 DKIM</li></ol><h3 id="手动配置" tabindex="-1">手动配置 <a class="header-anchor" href="#手动配置" aria-label="Permalink to &quot;手动配置&quot;">​</a></h3><p>如果您想手动配置 DKIM，请按照以下步骤操作：</p><h4 id="_1-生成-dkim-密钥对" tabindex="-1">1. 生成 DKIM 密钥对 <a class="header-anchor" href="#_1-生成-dkim-密钥对" aria-label="Permalink to &quot;1. 生成 DKIM 密钥对&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 生成私钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com/mail.private</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2048</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 从私钥中提取公钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com/mail.private</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pubout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -outform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com/mail.public</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 转换为 DNS 记录格式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com/mail.public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;^-&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;\\n&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keys/example.com/mail.txt</span></span></code></pre></div><h4 id="_2-添加-dns-记录" tabindex="-1">2. 添加 DNS 记录 <a class="header-anchor" href="#_2-添加-dns-记录" aria-label="Permalink to &quot;2. 添加 DNS 记录&quot;">​</a></h4><p>在您的域名 DNS 控制面板中，添加以下 TXT 记录：</p>`,17)]))}const c=i(n,[["render",t]]);export{F as __pageData,c as default};
